# WeChat Chat Demo

一个基于 Flask 的简单聊天界面示例，模仿微信的聊天功能。用户可以上传左右头像，发送消息，并导出聊天截图。

## 目录

- [项目简介](#项目简介)
- [功能特性](#功能特性)
- [项目结构](#项目结构)
- [安装与运行](#安装与运行)
- [使用指南](#使用指南)
- [依赖项](#依赖项)
- [静态资源](#静态资源)
- [问题与调试](#问题与调试)
- [贡献](#贡献)
- [许可证](#许可证)

## 项目简介

此项目展示了如何使用 Flask 创建一个简单的聊天界面，类似于微信的聊天功能。用户可以：

- **上传头像**：分别为左侧和右侧用户上传头像，头像将自动缩放为固定尺寸（40px x 40px）。
- **发送消息**：向左侧或右侧发送消息，消息将显示在相应的位置。
- **导出截图**：将当前聊天界面导出为图片。
- **自定义背景**：上传自定义聊天背景图片。

## 功能特性

1. **左右独立头像设置**：用户可以分别上传和更换左右两侧的头像。
2. **自动缩放头像**：上传的头像将自动缩放为固定尺寸，确保界面整洁。
3. **正确的头像与气泡位置**：确保左右两侧的头像和聊天气泡排列正确，视觉效果良好。
4. **导出聊天截图**：用户可以将当前聊天界面导出为 PNG 图片。
5. **背景自定义**：用户可以上传自定义的聊天背景图片。
6. **防止XSS攻击**：通过转义用户输入的特殊字符，提升应用的安全性。
7. **用户体验优化**：支持回车键发送消息，提升操作便捷性；响应式设计确保在不同设备上的良好显示效果。

## 项目结构
wechat-chat-demo/
 ┣ app.py                          # Flask后端
 ┣ requirements.txt                # (可选) Flask依赖
 ┣ templates/
 ┃   ┗ index.html                 # 主页面
 ┣ static/
 ┃   ┣ css/
 ┃   ┃   ┗ style.css             # 样式文件
 ┃   ┣ js/
 ┃   ┃   ┣ main.js               # 前端逻辑
 ┃   ┃   ┗ html2canvas.min.js    # html2canvas库
 ┃   ┗ images/
 ┃       ┣ default-avatar.png
 ┃       ┗ big-emoji.png
 ┗ ...

- **app.py**：Flask 应用的主文件，负责路由和渲染模板。
- **requirements.txt**：列出项目所需的 Python 依赖。
- **static/**：存放静态资源，包括 CSS、JavaScript 和图片。
  - **css/style.css**：样式表文件，定义了页面的布局和样式。
  - **js/main.js**：前端逻辑文件，处理用户交互和功能实现。
  - **images/default-avatar.png**：默认头像图片，当用户未上传头像时使用。
- **templates/index.html**：前端模板文件，定义了页面的结构和内容。
- **README.md**：项目说明文件。

## 安装与运行

### 前提条件

- **Python 3.7+**：确保已安装 Python，并且版本不低于 3.7。
- **pip**：Python 包管理工具，通常与 Python 一起安装。
